For more details on what we're doing here, look at https://codex.wordpress.org/Function_Reference/get_query_var

Specifically the custom query var section.

I'll add the customizer part shortly